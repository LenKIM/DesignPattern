# Facade 패턴

프로그램이라는 것은 점점 커지는 경향이 있습니다. 많은 클래스가 만들어져 서로 관계를 맺으면서 복잡하게 됩니다. 클래스를 사용할 경우에는 클래스 간의 관계를 정확히 이해하고 정확한 순서대로 메소드를 호출할 필요가 있습니다.



커다란 프로그램을 사용해서 처리를 실행하려면 상호 관련된 많은 클래스를 적절하게 제어해야 합니다. 그렇다면 그 처리를 실행하기 위한 '창구'를 준비해 두는 것이 좋습니다. 그렇게 하면 많은 클래스를 개별적으로 제어하지 않아도 그 '창구'에 대해서만 요구하면 역할이 끝나기 때문입니다.

이러한 '창구'가 `Facade 패턴`입니다.

예제>

1) 시스템은 메일 주소에서 이름을 얻는 데이터베이스(Database),  
2) HTML파일을 작성하는 클래스(HtmlWriter)  
3) 그리고 Facade 역할을 하는 높은 레벨의 인터페이스(API)를 제공하는 클래스(PageMaker)  

4) 메인 - 동작 테스트용 클래스



<... 코드 생략>



## 등장인물

### Facade(정면)의 역할

Facade 역할은 시스템을 구성하고 있는 그 밖의 많은 역할에 대해 '단순한 창구'가 됩니다. Facade 역할은 높은 레벨에서 단순한 인터페이스(API)를 시스템 외부에 제공합니다. 예제 프로그램에서는 PageMaker 클래스가 이 역할을 합니다.

### 시스템을 구성하고 있는 그 밖의 많은 역할

시스템을 구성하는 다른 많은 역할은 각각의 임무를 실행하지만 Facade 역할에 대해서는 신경쓰지 않습니다. Facade 역할에서 호출되는 임무를 실행하지만, 다른 역할이 Facade역할을 호출하는 일은 없습니다. 예제 프로그램에서는 Database 클래스와 HtmlWriter 클래스가 이 역할을 합니다.



![](https://ws2.sinaimg.cn/large/006tNc79gy1fpygkwb4onj30x00o8498.jpg)
![](https://ws3.sinaimg.cn/large/006tNc79gy1fpygkvic39j30x80oa7i5.jpg)
![](https://ws3.sinaimg.cn/large/006tNc79gy1fpygkuthwmj30xo0lewkb.jpg)

## Facade 역할은 무엇인가?

복잡한 것을 단순하게 보여줍니다. 그 '복잡한 것'이란 무엇일까? 내부에서 실행되고 있는 많은 클래스의 관계나 사용법이 '복잡한 것'을 말합니다. Facade 역할은 그 복잡한 것을 의식하지 않도록 해줍니다.

여기에서의 핵심은 **인터페이스(API)를 적게 하는 일**입니다. 클래스나 메소드가 많이 보이면, 프로그래머는 무엇을 사용하면 좋을지 망설이게 되고, 호출하는 순서에도 주의해야만 합니다. 주의해야 한다는 것은 틀리기 쉽다는 것입니다. 따라서 인터페이스(API)가 적은 Facade 역할을 생각하는 것이 좋습니다.

인터페이스(API)의 수가 적다는 것은 외부와의 결합이 소원하다고 표현할 수 있습니다. 외부와의 소원한 결합, 약한 결합, 유연한 결합은 패키지(클래스의 집합)를 부품으로써 재이용하기 쉽게 해줍니다.

클래스를 설계할 때에는 어떤 메소드를 public으로 할지 생까합니다. 너무 많은 메소드를 public으로 하면 클래스 내부를 수정하기 힘들게 됩니다. 필드에 대해서도 마찬가지입니다.뜻하지 않게 필드를 public으로 하면 다른 클래스가 그 필드의 내용을 멋대로 참조하거나 변경하기 때문에 클래스의 수정이 힘들게 됩니다.

클래스의 설계와 마찬가지로 패키지를 설계할 때에는 어떤 클래스를 public으로 할지 생각할 필요가 있습니다. 클래스를 지나치게 외부(패키지의 외부)에 노출시키면 패키지 내부를 수정하기 힘들게 됩니다.



## 재귀적인 Facade 패턴의 적용

 클래스에서 보다 큰 단위인 패키지로 눈을 돌려 발상의 전환을 해보도록 합시다. Facade 역할을 가진 클래스의 집합이 여러 개 있다고 가정합니다. 이때 클래스의 집합을 정리해서 새로운 Facade 역할을 도입할 수도 있습니다. 즉, Facade 패턴을 재귀적으로 적용하는 것입니다. 상당히 큰 시스템이 다수의 클래스, 다수의 패키지를 포함하고 있을 때 요소요소에 Facade 패턴을 적용하면 시스템은 보다 편리하게 됩니다.

## 프로그래머가 Facade를 만들지 않는 이유 - 심리적 요인

조금 이상한 이야기지만 복잡한 프로그램 내부를 숙지하고 있는 프로그래머는 Facade역할을 만들고 싶어하지 않으며, 무의식적으로 피할 때도 있습니다. 그것은 왜 그럴까요?

숙련된 프로그래머의 머리 속에는 시스템의 내용이 모두 들어있고 많은 클래스의 상호관계를 손에 잡힐듯이 알고 있기 때문일지도 모릅니다. 또는 자신의 기술을 자랑하며 다른 프로그래머에게 '아는 척'을 하고 싶기 때문일 수도 있습니다.

어떤 프로그래머가 '이 클래스를 호출하기 전에는 이것을 호출하고, 이 메소드를 호출하기 전에는 이 클래스에 등록해 둘 필요가 있다'는 말을 '득의에 차서'할 때에는 Facade 역할을 도입할 필요가 있단느 것을 시사하고 있습니다. 확실하게 언어로 표현할 수 있는 노하우는 프로그래머의 머리 속에 숨겨 둘 것이 아니라 코드로서 표현해야 합니다.



























